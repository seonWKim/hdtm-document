"use strict";(self.webpackChunkhdtm_document=self.webpackChunkhdtm_document||[]).push([[414],{2653:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>k,contentTitle:()=>v,default:()=>A,frontMatter:()=>j,metadata:()=>n,toc:()=>w});const n=JSON.parse('{"id":"others/guests","title":"Welcome Guests","description":"Feedbacks","source":"@site/docs/others/guests.mdx","sourceDirName":"others","slug":"/others/guests","permalink":"/hdtm-document/docs/others/guests","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Others","permalink":"/hdtm-document/docs/category/others"}}');var r=s(4848),a=s(8453),i=s(6540),o=s(223),d=s(1884),c=s(5347);const l=(0,o.Wp)({apiKey:"AIzaSyBf4rvXHX1e-wz-mCsG4BVn9hlJzxe3KmI",authDomain:"hdtml-document.firebaseapp.com",projectId:"hdtml-document",storageBucket:"hdtml-document.firebasestorage.app",messagingSenderId:"2009120721",appId:"1:2009120721:web:19bc8728afc3b68fb4eaf0",measurementId:"G-5BF5B4VK1S"}),u=(0,d.aU)(l),h=(0,c.xI)(l),m=new c.HF;var p=s(8774);const g=()=>{const[e,t]=(0,i.useState)(null),[s,n]=(0,i.useState)(!1);return(0,r.jsx)("div",{style:{textAlign:"center",marginTop:"50px"},children:e?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:["Welcome, ",e.displayName]}),(0,r.jsx)("img",{src:e.photoURL,alt:"User Avatar",style:{borderRadius:"50%"}})]}):(0,r.jsx)("div",{style:{textAlign:"left"},children:(0,r.jsx)(p.A,{className:"button button--primary button--md",onClick:async()=>{n(!0);try{const e=await(async()=>{try{return await(0,c.df)(h,m)}catch(e){console.error("Error during sign-in: ",e)}})();t(e.user)}catch(e){console.error("Error during sign-in: ",e)}finally{n(!1)}},children:s?"Signing in...":"Sign in with Google"})})})};var x=s(8500);const b=(0,d.rJ)(u,"/guest-feedback"),f=()=>{const[e,t]=(0,i.useState)(null),[s,n]=(0,i.useState)("");(0,i.useEffect)((()=>{(async()=>{const e=await new Promise((e=>{(0,c.hg)(h,(t=>{e(t)}))}));t(e)})()}),[]);return e?(0,r.jsx)("div",{style:{textAlign:"center",marginTop:"50px"},children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)("textarea",{placeholder:"Best toastmaster meetings ever!!",value:s,onChange:e=>n(e.target.value),className:"form-control",style:{width:"100%",height:"100px",marginBottom:"10px",padding:"10px",borderRadius:"5px",border:"1px solid #ced4da",fontSize:"16px"}}),(0,r.jsx)("div",{style:{alignSelf:"flex-end"},children:(0,r.jsx)(p.A,{className:"button button--primary button--md",onClick:async()=>{if(e){const t=e.displayName||"Anonymous",r=e.email||"No email provided";await(async(e,t,s)=>{try{await(0,d.gS)(b,{id:(0,x.A)(),name:e,email:t,content:s,createdAt:new Date,updatedAt:new Date})}catch(n){console.error("Error adding feedback: ",n)}})(t,r,s),n("")}window.location.reload()},children:"Submit"})})]})}):(0,r.jsx)(g,{})},y=()=>{const[e,t]=(0,i.useState)([]),[s,n]=(0,i.useState)(!1),[a,o]=(0,i.useState)(!0),c=(0,i.useCallback)((async()=>{n(!0),console.log(`id : ${e.length?e[e.length-1].id:void 0}`);const s=await(async(e,t)=>{let s;s=t?(0,d.P)(b,(0,d._M)("id","<",t),(0,d.My)("id","desc"),(0,d.AB)(e)):(0,d.P)(b,(0,d.My)("id","desc"),(0,d.AB)(e));try{return(await(0,d.GG)(s)).docs.map((e=>({...e.data()})))}catch(n){return console.error("Error fetching feedbacks: ",n),[]}})(2,e.length?e[e.length-1].id:void 0);console.log(s),t((e=>[...e,...s])),n(!1),o(2===s.length)}),[e]);(0,i.useEffect)((()=>{c()}),[]);return(0,r.jsxs)("div",{children:[(0,r.jsx)("ul",{children:e.map(((e,t)=>{const s=e.createdAt.seconds,n=new Date(1e3*s).toLocaleDateString("en-CA");return(0,r.jsxs)("li",{style:{borderBottom:"1px solid #ccc",padding:"10px 0"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{style:{margin:0,fontWeight:"bold"},children:e.name}),(0,r.jsx)("p",{style:{margin:0,color:"#555"},children:n})]}),(0,r.jsx)("p",{style:{marginTop:"10px"},children:e.content})]},t)}))}),a&&(0,r.jsx)("div",{style:{textAlign:"right"},children:(0,r.jsx)(p.A,{className:"button button--primary button--md",onClick:()=>{c()},children:s?"Loading...":"Show More"})})]})},j={sidebar_position:1},v="Welcome Guests",k={},w=[{value:"Feedbacks",id:"feedbacks",level:2},{value:"Previous Feedbacks",id:"previous-feedbacks",level:2}];function S(e){const t={h1:"h1",h2:"h2",header:"header",p:"p",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"welcome-guests",children:"Welcome Guests"})}),"\n",(0,r.jsx)(t.h2,{id:"feedbacks",children:"Feedbacks"}),"\n",(0,r.jsx)(t.p,{children:"Please give us some feedbacks \ud83d\ude09"}),"\n",(0,r.jsx)(f,{}),"\n",(0,r.jsx)(t.h2,{id:"previous-feedbacks",children:"Previous Feedbacks"}),"\n",(0,r.jsx)(y,{})]})}function A(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(S,{...e})}):S(e)}}}]);